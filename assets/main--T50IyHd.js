(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}})();const u={validateUrl(t){try{const r=new URL(t),o=["github.com","raw.githubusercontent.com","drrakendu78.github.io","fonts.googleapis.com","fonts.gstatic.com"];return r.protocol==="https:"&&o.includes(r.hostname)}catch{return!1}},validateGithubAsset(t){if(!t||typeof t!="object")return!1;const r=new URL(t.browser_download_url);return this.validateUrl(t.browser_download_url)&&t.name.endsWith(".msi")&&r.pathname.includes("/releases/download/")},sanitizeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}};window.security=u;document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("theme-toggle"),r=localStorage.getItem("theme"),o=window.matchMedia("(prefers-color-scheme: dark)").matches;r==="dark"||!r&&o?(document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme")):(document.body.classList.add("light-theme"),document.body.classList.remove("dark-theme")),t.addEventListener("click",()=>{document.body.classList.contains("light-theme")?(document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme"),localStorage.setItem("theme","dark")):(document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),localStorage.setItem("theme","light"))})});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll(".fade-in, .slide-in-right, .slide-in-left"),r={root:null,rootMargin:"0px",threshold:.1},o=new IntersectionObserver((s,e)=>{s.forEach(n=>{n.isIntersecting&&(n.target.classList.add("animate"),e.unobserve(n.target))})},r);t.forEach(s=>{o.observe(s)}),document.querySelectorAll('a[href^="#"]').forEach(s=>{s.addEventListener("click",function(e){const n=this.getAttribute("href");if(n&&n.startsWith("#")){e.preventDefault();const a=document.querySelector(n);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}})})});const l=["/Capture-ecran-2025-05-11-170607.png","/capture-ecran-2025-05-11-171534.png","/Capture-ecran-2025-05-11-222124.png","/Capture-ecran-2025-05-11-222132.png","/Capture-ecran-2025-05-11-222138.png","/Capture-ecran-2025-05-11-222151.png","/Capture-ecran-2025-05-11-222158.png","/Capture-ecran-2025-05-14-044458.png","/Capture-ecran-2025-05-14-152224.png"];let d=0;setInterval(()=>{d=(d+1)%l.length,document.getElementById("image-slideshow").src=l[d]},3500);const c=["/smartscreen_info.png","/smartscreen_run.png"];let i=0;setInterval(()=>{i=(i+1)%c.length,document.getElementById("smartscreen-slideshow").src=c[i]},3500);async function m(){try{const o=(await(await fetch("https://api.github.com/repos/drrakendu78/TradSC/releases/latest")).json()).assets.find(s=>s.name.endsWith(".msi")&&window.security.validateGithubAsset(s));if(o){const s=document.getElementById("download-msi"),e=document.getElementById("download-msi-install");s&&(s.href=o.browser_download_url,s.setAttribute("download",o.name)),e&&(e.href=o.browser_download_url,e.setAttribute("download",o.name),e.removeAttribute("disabled"),e.innerHTML=`
                        <svg class="download-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" style="margin-right:6px;">
                            <path fill="white" d="M5 20h14a1 1 0 0 0 0-2H5a1 1 0 0 0 0 2zm7-3a1 1 0 0 0 1-1v-5.59l1.3 1.3a1 1 0 1 0 1.4-1.42l-3-3a1 1 0 0 0-1.4 0l-3 3a1 1 0 1 0 1.4 1.42l1.3-1.3V16a1 1 0 0 0 1 1z"/>
                        </svg>
                        Télécharger la dernière version (.msi)`)}else console.error("Aucun asset MSI valide trouvé")}catch(t){console.error("Erreur lors de la récupération de la dernière version:",t);const r=document.getElementById("download-msi"),o=document.getElementById("download-msi-install");r&&(r.innerHTML="Erreur lors du chargement",r.disabled=!0),o&&(o.innerHTML="Erreur lors du chargement",o.disabled=!0)}}document.addEventListener("DOMContentLoaded",()=>{if(window.security)m();else{console.error("Module de sécurité non chargé");const t=document.getElementById("download-msi"),r=document.getElementById("download-msi-install");t&&(t.innerHTML="Module de sécurité non chargé",t.disabled=!0),r&&(r.innerHTML="Module de sécurité non chargé",r.disabled=!0)}});document.getElementById("download-msi-install").addEventListener("click",function(t){this.hasAttribute("disabled")&&t.preventDefault()});
